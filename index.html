<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LUFFY EYES</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .fade-in { animation: fadeIn 0.5s ease-in-out; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-6">

  <!-- LOGIN -->
  <div id="login" class="w-full max-w-md bg-white shadow-lg rounded-xl p-6 space-y-4 fade-in">
    <h2 class="text-2xl font-bold text-center text-blue-600">üîê Acesso ao LUFFY EYES</h2>
    <input id="user" type="text" placeholder="Usu√°rio" class="w-full p-2 border rounded" />
    <input id="pass" type="password" placeholder="Senha" class="w-full p-2 border rounded" />
    <button onclick="entrar()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded">Entrar</button>
    <div id="erroLogin" class="text-red-500 text-sm hidden">Usu√°rio ou senha incorretos.</div>
  </div>

  <!-- PAINEL -->
  <div id="painel" class="hidden w-full max-w-3xl bg-white rounded-2xl shadow-xl p-8 space-y-6 fade-in">
    <h1 class="text-3xl font-bold text-center text-blue-600">üîé LUFFY EYES</h1>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label for="base" class="block text-sm font-medium text-gray-700">Base de busca</label>
        <select id="base" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
          <option value="cpf">CPF</option>
          <option value="cnpj">CNPJ</option>
          <option value="rg">RG</option>
          <option value="cpfsimpl">CPF Simples</option>
          <option value="rgsimpl">RG Simples</option>
          <option value="nome">Nome</option>
          <option value="pis">PIS</option>
          <option value="titulo">T√≠tulo de Eleitor</option>
          <option value="telefone">Telefone</option>
          <option value="email">Email</option>
          <option value="cns">CNS</option>
          <option value="mae">Nome da M√£e</option>
          <option value="pai">Nome do Pai</option>
          <option value="placa">Placa</option>
          <option value="chassi">Chassi</option>
          <option value="renavam">Renavam</option>
          <option value="motor">Motor</option>
          <option value="fotorj">Foto RJ</option>
          <option value="fotosp">Foto SP</option>
          <option value="funcionarios">Funcion√°rios CNPJ</option>
          <option value="razao">Raz√£o Social</option>
        </select>
      </div>
      <div>
        <label for="info" class="block text-sm font-medium text-gray-700">Informa√ß√£o</label>
        <input type="text" id="info" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="Digite o valor (ex: CPF, Nome...)" />
      </div>
    </div>

    <button onclick="consultar()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-md transition duration-200">
      Consultar
    </button>

    <div id="resultado" class="text-sm font-mono whitespace-pre-wrap text-gray-800 bg-gray-50 border p-4 rounded-md h-80 overflow-y-auto">
      üìù Resultado aparecer√° aqui...
    </div>
  </div>

  <script>
    const autorizados = {
      "luffy": "12345",
      "admin": "admin123"
    };

    function entrar() {
      const user = document.getElementById("user").value;
      const pass = document.getElementById("pass").value;
      const erro = document.getElementById("erroLogin");
      if (autorizados[user] === pass) {
        document.getElementById("login").classList.add("hidden");
        document.getElementById("painel").classList.remove("hidden");
      } else {
        erro.classList.remove("hidden");
      }
    }

    async function consultar() {
      const base = document.getElementById('base').value;
      const info = encodeURIComponent(document.getElementById('info').value.trim());
      const resultado = document.getElementById('resultado');

      if (!info) {
        resultado.innerText = "‚ùå Por favor, preencha o campo de informa√ß√£o.";
        return;
      }

      resultado.innerHTML = "‚è≥ Consultando...";
      const url = `https://tes-mocha-omega.vercel.app/api/proxy?base=${base}&info=${info}`;

      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error("Erro na requisi√ß√£o.");
        const data = await res.json();
        resultado.innerHTML = renderData(data);
      } catch (err) {
        resultado.innerText = "‚ö†Ô∏è Erro ao buscar os dados:\n" + err.message;
      }
    }

    function renderData(data) {
      if (typeof data !== "object") return `<div>${data}</div>`;
      if (Array.isArray(data)) {
        if (data.length === 0) return "<div>üîç Nenhum resultado encontrado.</div>";
        return data.map(item => `<div class="mb-4 border-b pb-2">${renderData(item)}</div>`).join("");
      }
      return `
        <div class="space-y-1">
          ${Object.entries(data).map(([key, value]) => {
            return `<div><strong class="text-blue-700">${key}</strong>: ${formatValue(value)}</div>`;
          }).join("")}
        </div>
      `;
    }

    function formatValue(val) {
      if (typeof val === "object" && val !== null) {
        return `<pre class="bg-gray-100 p-2 rounded">${JSON.stringify(val, null, 2)}</pre>`;
      }
      return val === "" || val === null ? "<span class='text-gray-500'>(vazio)</span>" : val;
    }
  </script>

</body>
</html>
